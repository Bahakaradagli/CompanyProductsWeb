<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Marmara Dağıtım – Markalar</title>

  <!-- fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- mevcut genel stillerin (kart/grid) için -->
  <link rel="stylesheet" href="common.css">
  <!-- bu sayfanın header tasarımı için -->
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <!-- ==== DESKTOP NAV (Glide’e benzer) ==== -->
  <header class="desknav" role="banner" style="--accent:#54577D">
    <div class="desknav__wrap">
      <div class="desknav__inner">

        <!-- Sol: Logo + Başlık -->
        <div class="desknav__brand">
          <img class="desknav__logo"
               src="assets/logo-150.png"
               alt="Marmara Dağıtım Logo"
               onerror="this.style.display='none'">
          <span class="desknav__title">MARMARA DAĞITIM</span>
        </div>

        <!-- Sağ: Sekmeler -->
        <nav class="desknav__tabs" aria-label="Ana gezinme">
          <a class="desknav__tab" href="index.html" aria-current="page">
            <span class="desknav__icon" aria-hidden="true">
              <!-- briefcase -->
              <svg viewBox="0 0 24 24"><path d="M10 6V5a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v1m-9 4h14m-15 0
              a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H5
              a2 2 0 0 1-2-2v-7Z" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            </span>
            <span>Markalar</span>
          </a>
          <a class="desknav__tab" href="products.html">
            <span class="desknav__icon" aria-hidden="true">
              <!-- components -->
              <svg viewBox="0 0 24 24"><path d="M4 7h7v7H4V7Zm9 0h7v7h-7V7ZM8 17h8v3H8v-3Z"
              fill="currentColor"/></svg>
            </span>
            <span>Ürünler</span>
          </a>
          <a class="desknav__tab" href="contact.html">
            <span class="desknav__icon" aria-hidden="true">
              <!-- bank -->
              <svg viewBox="0 0 24 24"><path d="M3 10h18M5 10v8m4-8v8m6-8v8m4-8v8M3 18h18M12 4 3 8h18L12 4Z"
              fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            </span>
            <span>İletişim</span>
          </a>
        </nav>
      </div>
    </div>
  </header>

  <!-- ==== SAYFA İÇERİĞİ ==== -->
  <main class="container">
    <h2 style="margin:16px 0 16px">Markalar</h2>
    <div id="brands" class="brands"></div>
  </main>

  <footer>
    <small>© <span id="y"></span> Marmara Dağıtım • GitHub Pages</small>
  </footer>

  <!-- Aktif sekme (emniyete almak için) -->
  <script>
    (function(){
      const here = (location.pathname.split('/').pop() || 'index.html');
      document.querySelectorAll('.desknav__tab').forEach(t=>{
        const isHere = (t.getAttribute('href')||'') === here || (here==='' && t.getAttribute('href')==='index.html');
        t.setAttribute('aria-current', isHere?'page':'false');
      });
    })();
  </script>

  <!-- JSON'dan Markalar -->
  <script>
    const $ = s => document.querySelector(s);
    async function loadJSON(p){ const r=await fetch(p,{cache:'no-store'}); if(!r.ok) throw new Error(p); return r.json(); }

    (async function init(){
      try{
        const [catalogs, brands] = await Promise.all([
          loadJSON('data/catalogs.json'),
          loadJSON('data/brands.json')
        ]);
        const wrap = $('#brands'); wrap.innerHTML='';
        brands.forEach(b=>{
          const catId = (catalogs.find(c=>c.id===b.id)?.id)||'';
          const a = document.createElement('a');
          a.href = catId ? ('products.html#'+catId) : 'products.html';
          a.className = 'brand';
          a.innerHTML = `
            <img src="${b.img}" alt="${b.name} logosu"
                 onerror="this.src='https://dummyimage.com/88x88/0b0d12/ffffff&text='+encodeURIComponent('${(b.name||'M')[0]}')">
            <div>
              <h4>${b.name}</h4>
              <small>${b.count||''} ürün</small>
            </div>`;
          wrap.appendChild(a);
        });
        $('#y').textContent = new Date().getFullYear();
      }catch(e){ console.error(e); alert('Markalar yüklenemedi.'); }
    })();
  </script>
</body>
</html>
