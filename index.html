<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Marmara Dağıtım – Markalar</title>

  <!-- fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- ortak stiller (varsa) -->
  <link rel="stylesheet" href="common.css">
  <!-- bu sayfa -->
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <!-- ==== DESKTOP NAV (KORUNDU) ==== -->
  <header class="desknav" role="banner" style="--accent:#54577D">
    <div class="desknav__wrap">
      <div class="desknav__inner">
        <div class="desknav__brand">
          <img class="desknav__logo" src="assets/logo-150.png" alt="Marmara Dağıtım Logo" onerror="this.style.display='none'">
          <span class="desknav__title">MARMARA DAĞITIM</span>
        </div>
        <nav class="desknav__tabs" aria-label="Ana gezinme">
          <a class="desknav__tab" href="index.html" aria-current="page">
            <span class="desknav__icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M10 6V5a2 2 0 0 1 2-2h0a2 2 0 0 1 2 2v1m-9 4h14m-15 0a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7Z" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            </span>
            <span>Markalar</span>
          </a>
          <a class="desknav__tab" href="products.html">
            <span class="desknav__icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M4 7h7v7H4V7Zm9 0h7v7h-7V7ZM8 17h8v3H8v-3Z" fill="currentColor"/></svg>
            </span>
            <span>Ürünler</span>
          </a>
          <a class="desknav__tab" href="contact.html">
            <span class="desknav__icon" aria-hidden="true">
              <svg viewBox="0 0 24 24"><path d="M3 10h18M5 10v8m4-8v8m6-8v8m4-8v8M3 18h18M12 4 3 8h18L12 4Z" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
            </span>
            <span>İletişim</span>
          </a>
        </nav>
      </div>
    </div>
  </header>

  <!-- ==== ALT KISIM: GLIDE LİSTE GÖRÜNÜMÜ ==== -->
  <main class="container">
    <div class="list-outer">
      <div class="list list--flat" id="brandList" aria-live="polite"><!-- JS dolduracak --></div>
    </div>
  </main>

  <footer>
    <small>© <span id="y"></span> Marmara Dağıtım • GitHub Pages</small>
  </footer>

  <script>
    // aktif sekme emniyeti
    (function(){
      const here = (location.pathname.split('/').pop() || 'index.html');
      document.querySelectorAll('.desknav__tab').forEach(t=>{
        const isHere = (t.getAttribute('href')||'') === here || (here==='' && t.getAttribute('href')==='index.html');
        t.setAttribute('aria-current', isHere ? 'page' : 'false');
      });
    })();

    const $ = (s, r=document) => r.querySelector(s);

    async function loadJSON(url){
      const res = await fetch(url, { cache:'no-store' });
      if(!res.ok) throw new Error(url);
      return res.json();
    }

    function listRow(b){
      const row = document.createElement('a');
      row.className = 'row';
      row.href = 'products.html#' + encodeURIComponent(b.id);
      row.innerHTML = `
        <div class="row__left">
          <div class="row__thumb">
            <img src="${b.img}" alt="${b.name} logosu">
          </div>
          <div class="row__texts">
            <div class="row__title">${(b.name||'').toUpperCase()}</div>
          </div>
        </div>
        <div class="row__right" aria-hidden="true">
          <svg viewBox="0 0 24 24" class="row__chev"><path d="M9 6l6 6-6 6" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </div>
      `;
      const img = row.querySelector('img');
      img.onerror = () => {
        img.onerror = null;
        img.src = 'https://dummyimage.com/120x120/ffffff/111111&text=' + encodeURIComponent((b.name||'M')[0]);
      };
      return row;
    }

    (async function init(){
      try{
        const brands = await loadJSON('data/brands.json');
        const wrap = $('#brandList'); wrap.innerHTML = '';
        brands.forEach(b => wrap.appendChild(listRow(b)));
        $('#y').textContent = new Date().getFullYear();
      }catch(e){
        console.error(e); alert('Markalar yüklenemedi.');
      }
    })();
  </script>
</body>
</html>